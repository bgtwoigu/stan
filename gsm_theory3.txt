GSM主要信令过程分析
1.小区的选择与重选
	为MS选择一个最合适"小区",可靠解译BCCH信道下行链路数据,和上行链路有较高的通信率,连入一个小区后,即可在该小区上进行网络通信.
	根据服务小区系统广播消息的BCCH分配(BA)表信息来进行小区选择和重选,SACCH上系统消息发送的BA用于专用模式下向MS指示哪个BCCH载波用于切换监测.
	1.小区选择过程:
	手机开机或从盲区进入覆盖区,寻找合适小区的过程称为小区选择.
	
	若无存储BCCH信息->搜索gsm900的124个RF信道->gsm1800的374个频点->\(计算每一个频点信道的信号强度,平均电平,整个过程时序3-5秒,每个RF信道至少抽取5个测量点)
	优先选择电平最大的载波上->判断是否为BCCH载波(通过搜寻FCCH突发脉冲)->MS尝试解码SCH信道来同步载波并读取BCCH的系统广播消息->\
	->MS正确解码BCCH数据,证实该小区的属于所选的PLMN,是否被禁止接入,C1>0,方可留在这个小区否则就切换到电平低一点的载波上->\
	->继续寻找合适小区->若寻找30个以上都没有合适的,继续保持寻找过程不过再次找到后可以不考虑PLMN识别,这种模式下只能进行紧急呼叫
	
	MS有存储BCCH信息->优先搜索存储的BCCH载波,若可以译码该小区的BCCH数据,驻留->若不能驻留,检查该小区的BA表,搜索表中所有BCCH载波->\
	->有合适的可以译码的,驻留->若都没有合适的则回到无存储BCCH信息的情况开始搜索GSM900的124个Rf信道开始->......
	
	C1是供小区选择和重选的路径损耗准则,服务小区的C1必须大于0,C1值越大选择优先级越高.
	C1=MS接收平均电平-允许MS接入的最小接收电平-MAX((MS接入系统时可使用的最大发射功率电平-MS最大输出功率),0);单位都是dBm
	
	2.小区重选过程:
	当待在一个小区时,仍会继续监测由服务小区的BCCH载波所指示的小区重选邻小区频点BA表的所有BCCH载波
	对信号最强的6个载波保持时序监测,对其BCCH载波的数据进行解码,MS对PCH的侦听尽量不要中断
	小区改变的条件:
		1.MS计算出同一位置区的某小区C2大于当前小区C2值持续超过5s
		2.不同位置区的某小区C1值超过当前服务小区的C2值和重选滞后值之和持续5s,若在前15s内有小区重选则不立刻发生重选
		3.当前小区被禁止连接
		4.MS监测下行出现链路故障(下行信令故障计数器DSC为0即判定链路故障)
		5.当前小区C1值连续5s小于0
		6.MS随机接入时,在最大重传接入尝试仍不成功情况下
	C2算法未激活,C2=C1
	
	3.空闲模式下的MS
	对MS进行系统消息广播和寻呼
	系统消息2-4,可选类型1,2bis,7,8都从BCCH信道上广播,MS根据信息来决定是否以及如何接入到网络中
	
	4.不连续接收模式DRX/寻呼信道
	进入一个小区后,就可以接收该小区的寻呼,为降低功耗,让每一个MS都对应一个寻呼组,根据国际移动用户识别码IMSI的最后3位可以招数所属寻呼组,
	会有对应的一个寻呼子信道,MS只收听该子信道上的内容.
	
	GSM允许在携带BCCH信道的载频上,配置多个CCCH信道,只能在TS0,TS2,TS4,TS6上使用
	
2.立即指配程序
	在Um无线接口建立MS和系统间的无线连接,RR(无线资源管理)连接
	1.信道申请
	RACH信道上发送请求,3bit的建立原因,5bit的移动台随机选择的鉴别符
	0-9的10个接入等级/11-15的5个特殊接入等级;MM(移动性管理)
	两信号抢夺同一RACH信道申请接入的现象,需要引入信道请求重发机制
*	MS通过以下方式确定在RACH上最多可以发送M+1次"信道请求":
		1.发起指配程序和一个"信道请求"之间的时隙数目是以相同概率随机在{0,1,...MAX(T,8)-1}中选择
		2.MS两个连续信息请求消息之间的时隙数是以相同概率随机的在{S,S+1,...S+T-1}中选取
		T是BCCH上广播的参数"TX整数";M为"最大重传次数";S取决于CCCH的配置
		若经过最大重发次数仍未得到系统的立即指配命令,MS将返回到空闲状态下.
	发送完初始信道请求后,MS启动定时器T3120监视全下行的CCCH信道和BCCH信道准备接收应答.
	当定时器T3120超时,RACH重发次数还没超过最大重发次数,MS将重发信道请求,其中包含一个新的随机参考,重定时T3120
	当定时器T3120超时,重发次数也达到最大,MS将启动T3126,此后等待并允许网络放弃.
	当T3126也超时未收到应答,放弃请求尝试,进行小区重选.
	
	2.初始信道的分配
		MS信道请求->BTS正确解码通过Abis发给BSC->BSC为请求选择相应信道,向BTS发送"信道激活"报文->BTS确认激活信道的信道类型\
		工作模式,物理特性和TA,BTS准备好相应资源后向BSC返回一条"信道激活证实"报文.
		1.立即指配
		收到BTS的信道激活证实后,BSC将在MS"信道请求"的同一CCCH时隙以无证实方式发送一条"立即指配"或"扩展立即指配"消息来为MS分配专用信令信道,发出立即指配命令同时网络启动定时器T3101
		立即指配:包含一个MS指配信息
		扩展立即指配:包含两个MS指配信息
		指配消息包括:指配信道的描述;信道请求的信息字段和接收到信道请求帧的缩减帧的号码;第一个TA;起始时间提示;
		MS收到立即指配后,信道模式变为信令模式,停止发送"信道请求",停止T3126,并在系统指配的信道上通过发送带有信息字段的SABM来建立主信令链路.
		
		在发送了第一个"信道请求"后,MS就开始收听BCCH的系统消息,同时也收听它寻呼组对应的CCCH时隙,立即指配命令可能出现在51复帧的任何一个CCCH消息块内,
		需要MS发送请求后就一直监视所有的CCCH块,对整个寻呼子信道的消息都要解码,来保证及时获得应答.
		
		2.立即指配拒绝
		如果BSC发现无可用信道分配,通过CCCH以无证实方式向MS发送"立即指配拒绝"消息(分为请求参考和等待指示)
		原因:MSC话务关闭,无线资源缺乏,TA值超出界限,信道激活无应答,BSC话务超载等等
		
		MS收到拒绝消息后,停止T3120,启动T3122,返回CCCH空闲模式,直到T3122超时才能再一次进行新的RR连接尝试,在T3122超时之前MS不允许在同小区内发起紧急呼叫之外的新呼叫尝试,
		只要没有接收到紧急RR尝试的"立即指配拒绝"在T3122超时前可以在同一小区内尝试建立紧急呼叫.
		T3122超时后,MS要在收到"寻呼请求"后才能发送"信道请求".
		
		立即指配拒绝扩展:可以包含4个MS的拒绝消息(提高效率)
		
		3.信令信道重复指配
		原因:系统对MS指配较慢,MS已经重发了请求,系统不能分清是哪一次的请求
		定义:MS会使用它解码的第一条立即指配报文所指配的的信道,其他视为无效,但规范规定MS必须接收对最后三条信道申请的报文的网络应答,这种情况被称为重复分配.(3选1)
		解决办法:减少MS重发次数;降低T3101时间
		
	3.初始化报文
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	