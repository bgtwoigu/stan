==UMTS和WCDMA到底是什么==
Wideband-CDMA
WCDMA是由GSM发展而来的一种新的制式"名"
WCDMA仍旧保留着很多GSM中已有的东西,例如:NAS非接入层构成:MM,GMM(GPRS-MM),CM(CC,SMS,SS(CS-domain)/SM-session management(PS-domain))
AS接入层:RRC;layer1;layer2
在SIM基础上发展而来的USIM

UMTS(universal mobile telecommunications system)
*3G,基于CDMA无线接入网络,频率3.84Mcps
*基于GSM/GPRS系统网络发展起来的,应用标准一致
*频分双工\时分双工,如果是频分双工模式需要成对的频段
*支持大量新兴服务,高传输速率(PS域可达 1.96Mbps, CS域最大可达384kbps)

提供wireline的话音质量,提高容量和频带利用率,利用AMR适应多种频率的发声器在EFR增强型全速率编码方式上面

P19	各类模块/layer的协议标准
acronyms名词英文缩写表 21.905
release 99/specifications(specs)完整规格协议列表 21.101

==谈谈3gpp==
(www.3gpp.org)
3gpp第三代伙伴项目计划意图继续发展维护UMTS的协议规则,主要由ARIB,CWTS,ETSI,T1,TTA,TTC组成.
3gpp一开始涉及的范围是在GSM核心网络基础上发展第三代移动通信系统和为(FDD,TDD)无线接入新技术提供支持,后来发展过程中又加入了新的无线接入技术例如GPRS,EDGE(增强型数据传输-GSM演化)

==UMTS-standard==
release 99 features:
新的无线接口(UTRAN),码片速率=3.84Mcps(M chip per second)
//码片速率＝符号速率×扩频因子 
//符号速率＝（业务速率＋校验码）×信道编码×重复或打孔率 
多媒体消息
GSM/GPRS协同工作
支持多个来电
基础的UMTS安全性能
通过空中接口的定位服务

release 4 features:
TDD码片速率1.28Mcps
UTRA(UMTS-地面无线接入)中继器
CS域紧急呼叫增强
核心网CN传输协议演化
bearers承载独立与CS架构

release 5 features:
UTRAN传输网络协议演化
基于ip的多媒体服务
高速下行分组接入技术(HSDPA)
PS域中可靠的QoS

release 4和5指示99的补充部分

==UMTS网络结构==
非接入层NAS:CS-domain/PS-domain
接入层AS:
1.UTRA-FDD(此种无线接入系统使用的WCDMA协议); 
2.UTRA-TDD(使用的TDD协议,包括了TDD at 3.84Mcps和TDD at 1.28Mcps,这种制式也被叫做TD-SCDMA); 
3.GSM/GPRS

"UMTS"就是包括了两个核心网络(CS,PS),囊括了3种类型的无线接入网络的综合性的移动通信系统的集合"称呼".

only FDD协议是被addressed的
WCDMA是FDD物理层和协议栈所支持的
UTRAN归属于WCDMA的无线接入网络
WCDMA意味着"NTT DOCOMO"? WCDMA代表着在UMTS中采用FDD制式的无线接入网络(由3gpp定义)

==UMTS的重要技术概念(concepts)==
===编码方式的变化===
FDMA:每个用户指定一个特定频点(一个呼叫过程中不能改变),允许系统的多接入,第一代模拟系统就是使用的单频分多址系统.
TDMA:一个频带分为多个频点,一个频点再时分为多个"时间片","跳频"允许用户接入这个频带内任一频点的任一"时间片"内.
CDMA:多用户占用同样的频带和时间片,通过唯一的分配码来区分彼此,在接收处信号是通过相关器只接受信号能量来自于指配码信道的,所有在该频带的其他信号都只会被认为是"噪声",CDMA2000和WCDMA都是使用的这个基础CDMA调制概念.

类似于一个大房间里很多人同时用不同的语言交谈,你只会识别你"认识"的语言而过滤掉其他的信息,无线网络也是如此,根据特定的分配码,识别对应的信息,同时还会进行power control过程(对于微弱的信号请求加强,对于"嘈杂"的信号请求减弱),减小互相干扰,但也不影响正常识别.

===频带分配===
UMTS FDD:
上行			下行
1920-1980Mhz 	2110-2170Mhz
1850-1910Mhz 	1930-1990Mhz	(GSM1900?)
频带宽度:	60Mhz
频带间隔:	190Mhz/80Mhz
频点间隔:	200Khz

===信道特点===
UMTS信道带宽空间名义是5Mhz,但是可以根据特殊的应用优化调整,信道的间隔是200Khz,意味着每个信道的中心频率值(频点)一定是200Khz的整数倍,信道编号即"UTRFCN".
频点号"UARFCN(UTRA absolute radio frequency channel number)" x 200Khz = 所在频点的频值大小
UTRA = UMTS Terrestrial(地面) Radio Access

===功率控制===
根据收到功率的大小来发出需要增强或减弱的请求,平衡路径不同带来的损耗差异,形成一个闭环的功率调整系统.

===切换===
WCDMA系统中,软切换使用优于硬切换,软切换可以先确定目标切换小区后再决定如何处理与原服务小区的连接,UE和多个小区的连接之间不会互相影响,且也可以同时连接多个小区.

===UMTS系统的网络拓扑结构===
UE:USIM和mobile端
Access network:一个或多个nodeB---RNC
core network:PS domain(SGSN,GGSN(GGSN类比于PS域里的"GMSC"))---(internet); CS domain(MSC/VLR,GMSC(MSC之间的汇接))--(PSTN/ISDN)
对于WCDMA制式的系统,CN实际就是GSM/GPRS系统的演化升级,UTRAN的接口是新加的东西,不同于以往的Um无线接口,nodeB和RNC也和BTS,BSC有差异.
PS和CS domain共享同一个auc和HLR,UE可以再GSM和WCDMA之间切换,GSM系统通过A/Gb接口和MSC/SGSN两个域相连,UTRAN通过对应的lu接口互连.

USIM:universal subscriber identity module/manage UE subscription info and authentication functions
include a universal integrated circuit card(UICC)

===网络结构===
cell/Route Areas/URA/Location Areas
传统nodeB一般会包含3个cell,在CS域cell都在被LA控制,在PS域里,路由和移动性管理MM由RA控制,小区,路由区,位置区都属于URA内部结构,被用来管理处于连接模式下的UE的位置情况,RA只对应一个LA,一个LA可以对应多个RA,URA一般比LA和RA要小(不绝对限制),URA是UTRAN网络的一部分.

===信令协议栈===
域			CS domain					PS domain
NAS:		CM(SMS短消息服务,CC,SS)		SMS/SM(session management/处理PS域的call的建立和释放)
			MM							G(GPRS)MM
AS:	layer3	RRC							RRC
	layer2	RLC							RLC
			MAC							MAC
	layer1	Physical layer				Physical layer

UMTS的非接入层和GSM的相似,主要的不同点在于WCDMA接入层协议栈和各个接口

控制面的协议栈:展示信令协议如何起始结束,CS域的call怎么运行在专用的物理信道上
CM:负责UE和MSC之间的呼叫建立和释放
MM:负责UE和MSC之间的移动性管理
RRC:UE和RNC之间的无线资源的建立,释放,配置
RLC:在UE和RNC之间提供segmentation,re-assembly,重新检测,layer 2的信令传输
MAC:UE和RNC之间-多路复用-用户面和控制面的数据
物理层:UE和nodeB/nodeB和RNC之间传输数据所需要的无线链路的连接Uu,它们之间的物理层的接口处理组合和拆分两个工作

用户面协议栈:展示用户协议如何起始终止
NAS:一个包含了很多layers的application,处于远程用户/MSC和UE之间,通过两端都设置有的话音编码器发出或接受信号,传输通过无线方式或者数字线路
RRC:用户面协议栈没有RRC
RLC/MAC/物理层:功能和控制面的一样

接入层:
RRC:整个接入层的控制器,负责配置提供AS所有层面向NAS层的信令接口,管理无线资源(分配,逻辑配置,传输,物理信道等等)
BMC(boardcast/multicast control):小区广播消息的存储,调度,传输,发送,请求无线资源
PDCP(packet data convergence protocol):分组数据的压缩和解压
RLC:无线接入链路的控制;加密;segmentation;re-assembly;重新检测;提供ACK/UNACK响应;transparent的数据传输模式
MAC:映射和多路复用逻辑信道到传输信道;UE认证;随机接入信道;加密;处理数据流的优先级
physical layer:前向纠错编码/解码;传输信道上的错误删除;软切换和宏分集的分配/组合;交织/反交织;多路复用/解多路复用;rate匹配;调制/解调;频率和时间(chip,bit,slot,frame)同步;闭环功率控制;RF进程;spreading(扩展)/despreading......

future channels(not exist in release 99):
Common Packet Channel (CPCH) – Uplink Transport Channel
Physical Common Packet Channel (PCPCH) – Uplink Physical Channel
Common Traffic Channel (CTCH) – Downlink Logical Channel
Downlink Shared Channel (DSCH) – Downlink Transport Channel
Physical Downlink Shared Channel (PDSCH) – Downlink Physical Channel

寻呼信道PCH和PICH,UTRAN不间断在PCH上播放广播信息,UE只监测对应PICH,PICH指示着一组移动端的信息是否传输到对应的SCCPCH上,all的UE分配给一个特定的PICH,而且PICH的指示器会解码联合的SCCPCH信道内容去判断哪一个UE的信息是需要被寻址/寻呼的.

BCCH逻辑信道携带系统消息,驻留在WCDMA小区,UTRAN广播持续发送消息,在一个系统配置的重复频率重复发送系统消息,UE在进入一个小区或开机后读取该信道,确保UE获得了正确的最新的系统消息

FACH和RACH:
携带UTRAN到空闲模式下的UE的消息,用于UE没有一个专用信道的时候,RACH有一个接入协议,UE会传送一个协议头去提高发射功率直到UTRAN在AICH做出响应,收到响应之后,UE会发送剩下的RACH信道的信息.
当UTRAN全部收到来自UE的RACH信道消息,它会对在FACH上发出响应,前向传送信道映射在SCCPCH上,这可能是和搭载过PCH的同一个物理信道.

专用信道携带着信令和用户信息数据,这些信道在呼叫被发起时或分组数据传输时才会被指配,通常来说DCCH被指配去负载RRC和NAS的信令,这也被叫做SRB(信令的无线承载).两个SRB去负载RRC信令,其中一个配置响应模式,另一个配置unack模式;如果SRB被指配去负载NAS信令,两个分别去负载高优先级和低优先级的信息.
专用业务信道DTCH由所使用的应用服务类型来指配,对于话音,可适应的多频声码器使用3个DTCH去承载不同的编码话音信号;DCCH和DTCH在DCH传输信道上实现多路复用,每一个都指配给一个独立的DCH;所有DCH传输信道可以multiplexed在一个单独的DPDCH上,未来还会支持多路的DPDCH;DPCCH携带着去更新物理层的控制信息,例如导频信息,功率控制,rate bit......

==接入信令层==
===UE识别鉴定/呼叫状态===
编号计划:IMSI/IMEI/C-RNTI/U-RNTI/TMSI(VLR分配,CS域临时id)/P-TMSI(由SGSN分配,PS域临时id)
C-RNTI在UE建立RRC连接时被分配,用于保持UE在公共信道上的连接.
U-RNTI在UE建立RRC连接时被分配,用于小区更新/URA更新/RRC连接的重建/UTRAN发起寻呼

UE call states:
1.idle mode
只有下行的PCH.
空闲模式可以分为"驻留在UTRAN的cell中"或"GSM/GPRS的cell中",当没有CS/PS域的呼叫时UE会处在空闲模式,UE会在它的寻呼周期检测PCH和PICH,以便UE可以做出回应,UE也可以自己主动发起呼叫过程,直接通过RACH向UTRAN(RNC)发起RRC连接请求.
移动性管理:空闲模式下,对于CS域服务,UE表现为"位置区的更新",当UE进入一个新的位置区,UTRAN会向该位置区内的所有小区发起对UE的寻呼;对于PS域服务,表现为"routing area(路由区)的更新".
addressing:空闲模式下,UTRAN对UE进行寻址通过IMSI,TMSI或者P-TMSI进行.
call types:空闲模式下,没有活动呼叫被允许,然而一个PS域的呼叫应该处于"上下文保留"的状态.

2.cell_DCH
上下行都是通过DCH.
UTRAN的4种连接状态的状态转换,可以由cell_FACH状态下建立DPCH(专用物理信道)来转换到DCH状态,也可以在空闲模式下通过RRC的建立和释放达到互相转换.
移动性管理:UTRAN在UE更换了小区时发起"切换"过程,相应小区的新信道建立替换旧的.
addressing:因为都在专用信道上,所以不需要寻址,对应的RNTI(无线网络临时识别码)会在RRC建立时分配.
call types:CS(总是)/PS域(可能)的呼叫运行在在cell_DCH状态下,CS域需要稳定的专用信道用于传输;PS域的呼叫需要高速的数据传输条件,网络也需要保证稳定性.

3.cell_FACH
下行FACH,上行RACH.
状态转换:空闲模式通过RRC连接建立;cell_DCH状态通过释放专用信道;cell_pch和ura_pch状态下UE发起需求信令传输或用户数据传输;在fach状态下,UE持续监测FACH,避免错过UTRAN端发送来的数据或者信令.
移动性管理:UTRAN在UE发生小区变换时发起"小区的更新".
addressing:在前向接入信道中,UTRAN通过C-RNTI或U-RNTI(RRC连接建立时被分配)来寻址.
call types:PS域呼叫可能运行在此状态,?突发性的分组数据服务可以忍受公共信道的低吞吐量.

4.cell_PCH
只有PCH的下行.
可通过RACH响应寻呼或者UE自己发起寻呼从cell_PCH转换到cell_FACH状态;当UTRAN监测到UE在PS域呼叫过程中缺少activity,可以由cell_DCH或cell_FACH转换到cell_PCH状态.
移动性管理:当UE位置小区变换,UTRAN发起"小区更新".(需要先切换到cell_FACH状态下在进行更新)
addressing:根据U-RNTI来寻址.
call types:PS域呼叫可能因为低活动性进入到cell_PCH状态,当发起任何数据传输后又会变成cell_FACH状态.

5.ura_PCH
只有下行的PCH.
和cell_PCH变换形式一样,从DCH/FACH因为低活动性变换到PCH,从PCH因为响应寻呼/UE发起寻呼变换到FACH状态.
移动性管理:当UE的RA(路由区)变化时,发起"URA的更新过程",UTRAN在RA内的所有小区发起对UE的寻呼.
addressing:和cell_PCH一样,根据U-RNTI来寻址.
call types:PS域呼叫可能因为低活动性进入到ura_PCH,特别是低活动性对应着高移动性的时候,而当发起任何数据传输后又会变成cell_FACH状态.

===接入层/协议栈===

===RRC===
整个接入层的控制器,负责配置提供AS所有层面向NAS层的信令接口,管理无线资源(分配,逻辑配置,传输,物理信道等等)
1.(BCH)系统消息的广播:由CS/PS-CN发到RNC在变成"SIB/MIB"发给UE,系统消息包含接入层和非接入层的系统消息元素.
2.


===RLC===

===MAC===















